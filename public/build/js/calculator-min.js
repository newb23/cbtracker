var week=7,month=30,$table=$("#table-result tbody");function getGasOffsetFee(t,e,a,s){return fromEther(Math.trunc(toEther(t)*s/100*a/e))}async function testSimulate(){$("#btn-simulate").prop("disabled",!0),gtag("event","click",{event_category:"button",event_label:"Calculate Rewards"});var t=$("#combat-character").val(),e=$("#combat-weapon").val();$table.html("");try{if(!t)throw Error("Please enter a character.");if(!e)throw Error("Please enter a weapon.");$table.html('<tr><td class="text-white text-center" colspan="13">Calculating....</span></tr>');var a=characterFromContract(t,await getCharacterData(t));a.power=parseInt(await conCharacters.methods.getTotalPower(t).call());var s=weaponFromContract(e,await getWeaponData(e)),r=await characterTargets(t,e),o=await getEnemyDetails(r),n=await getTokenPrice(),l=await getSkillTokenPrice(),c=await getCombatTokenChargePercent(),i=await Promise.all(o.map(async t=>{var e=getAlignedCharacterPower(a,s);return{enemy:t,skill:fromEther((await getTokenReward(t.power)).toString().split(".")[0]),exp:Math.floor(t.power/e*32)}}));let F=0,p=0,g=0,w=0;i.forEach(t=>{var e=Number(t.skill),a=Number(t.exp);0===F&&(F=e),e>p&&(p=e),e<F&&(F=e),0===g&&(g=a),a>w&&(w=a),a<g&&(g=a)}),$table.html("");for(var d=parseInt(7.2);d>0;d--)$table.append(` <tr>\n                                <td class="text-white">${d}</td>\n                                <td class="text-success">${parseFloat(F*d).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(p*d).toFixed(6)}</td>\n                                <td class="text-warning">${parseInt(g*d)}</td>\n                                <td class="text-warning">${parseInt(w*d)}</td>\n                                <td class="text-info" title="$${parseFloat(getGasOffsetFee(F,n,l,c)*d*(n/10)).toFixed(4)}">${parseFloat(getGasOffsetFee(F,n,l,c)*d).toFixed(6)}</td>\n                                <td class="text-info" title="$${parseFloat(getGasOffsetFee(p,n,l,c)*d*(n/10)).toFixed(4)}">${parseFloat(getGasOffsetFee(p,n,l,c)*d).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(F*d*week).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(p*d*week).toFixed(6)}</td>\n                                <td class="text-warning">${parseInt(g*d*week)}</td>\n                                <td class="text-warning">${parseInt(w*d*week)}</td>\n                                <td class="text-info" title="$${parseFloat(getGasOffsetFee(F,n,l,c)*d*week*(n/10)).toFixed(4)}">${parseFloat(getGasOffsetFee(F,n,l,c)*d*week).toFixed(6)}</td>\n                                <td class="text-info" title="$${parseFloat(getGasOffsetFee(p,n,l,c)*d*week*(n/10)).toFixed(4)}">${parseFloat(getGasOffsetFee(p,n,l,c)*d*week).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(F*d*month).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(p*d*month).toFixed(6)}</td>\n                                <td class="text-warning">${parseInt(g*d*month)}</td>\n                                <td class="text-warning">${parseInt(w*d*month)}</td>\n                                <td class="text-info" title="$${parseFloat(getGasOffsetFee(F,n,l,c)*d*month*(n/10)).toFixed(4)}">${parseFloat(getGasOffsetFee(F,n,l,c)*d*month).toFixed(6)}</td>\n                                <td class="text-info" title="$${parseFloat(getGasOffsetFee(p,n,l,c)*d*month*(n/10)).toFixed(4)}">${parseFloat(getGasOffsetFee(p,n,l,c)*d*month).toFixed(6)}</td>\n                            </tr>`);$("#btn-simulate").removeAttr("disabled")}catch(t){console.log(t),alert(t.message),$("#btn-simulate").removeAttr("disabled")}}$("#select-network").on("change",t=>{gtag("event","click",{event_category:"button",event_label:"Update Network"}),updateNetwork(t.currentTarget.value),populateNetwork()});