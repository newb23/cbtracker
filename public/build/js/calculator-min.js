var week=7,month=30,$table=$("#table-result tbody");function getGasOffsetFee(t,e,a,s){return fromEther(Math.trunc(toEther(t)*s/100*a/e))}async function testSimulate(){$("#btn-simulate").prop("disabled",!0),gtag("event","click",{event_category:"button",event_label:"Calculate Rewards"});var t=$("#combat-character").val(),e=$("#combat-weapon").val();$table.html("");try{if(!t)throw Error("Please enter a character.");if(!e)throw Error("Please enter a weapon.");$table.html('<tr><td class="text-white text-center" colspan="13">Calculating....</span></tr>');var a=characterFromContract(t,await getCharacterData(t));a.power=parseInt(await conCharacters.methods.getTotalPower(t).call());var s=weaponFromContract(e,await getWeaponData(e)),r=await characterTargets(t,e),n=await getEnemyDetails(r),o=await getTokenPrice(),l=await getSkillTokenPrice(),c=await getCombatTokenChargePercent(),d=await Promise.all(n.map(async t=>{var e=getAlignedCharacterPower(a,s);return{enemy:t,skill:fromEther((await getTokenReward(t.power)).toString().split(".")[0]),exp:Math.floor(t.power/e*32)}}));let p=0,w=0,g=0,x=0;d.forEach(t=>{var e=Number(t.skill),a=Number(t.exp);0===p&&(p=e),e>w&&(w=e),e<p&&(p=e),0===g&&(g=a),a>x&&(x=a),a<g&&(g=a)}),$table.html("");for(var i=parseInt(7.2);i>0;i--)$table.append(` <tr>\n                                <td class="text-white">${i}</td>\n                                <td class="text-success">${parseFloat(p*i).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(w*i).toFixed(6)}</td>\n                                <td class="text-warning">${parseInt(g*i)}</td>\n                                <td class="text-warning">${parseInt(x*i)}</td>\n                                <td class="text-info">${parseFloat(getGasOffsetFee(p,o,l,c)*i).toFixed(6)}</td>\n                                <td class="text-info">${parseFloat(getGasOffsetFee(w,o,l,c)*i).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(p*i*week).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(w*i*week).toFixed(6)}</td>\n                                <td class="text-warning">${parseInt(g*i*week)}</td>\n                                <td class="text-warning">${parseInt(x*i*week)}</td>\n                                <td class="text-info">${parseFloat(getGasOffsetFee(p,o,l,c)*i*week).toFixed(6)}</td>\n                                <td class="text-info">${parseFloat(getGasOffsetFee(w,o,l,c)*i*week).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(p*i*month).toFixed(6)}</td>\n                                <td class="text-success">${parseFloat(w*i*month).toFixed(6)}</td>\n                                <td class="text-warning">${parseInt(g*i*month)}</td>\n                                <td class="text-warning">${parseInt(x*i*month)}</td>\n                                <td class="text-info">${parseFloat(getGasOffsetFee(p,o,l,c)*i*month).toFixed(6)}</td>\n                                <td class="text-info">${parseFloat(getGasOffsetFee(w,o,l,c)*i*month).toFixed(6)}</td>\n                            </tr>`);$("#btn-simulate").removeAttr("disabled")}catch(t){console.log(t),alert(t.message),$("#btn-simulate").removeAttr("disabled")}}$("#select-network").on("change",t=>{gtag("event","click",{event_category:"button",event_label:"Update Network"}),updateNetwork(t.currentTarget.value),populateNetwork()});